<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>视频直播</title>
    <link rel="shortcut icon" href="favicon.ico">
    <link href="css/style.css" rel="stylesheet">
    <link href="css/style-responsive.css" rel="stylesheet">
</head>
<body>

<div class="container" style="padding-top: 20px">
   <!-- <iframe src="nav.html" width="100%" height="100px" style="border:#fff 0"></iframe>-->
    <div class="panel">
        <header class="panel-heading custom-tab turquoise-tab" style="color: #FFFFFF">
            <i class="fa fa-home"></i> Flash视频发布(rtmp)
        </header>
        <div class="panel-body" style="background: #CDCDCD; text-align: center">
            <div class="row"  style="text-align: left;">
                <div class="col-sm-4 form-group has-success">
                    <label class="control-label" for="iptAddr">服务器地址</label>
                    <input type="text" class="form-control input-sm" id="iptAddr">
                </div>

                <div class="col-sm-2 form-group has-success">
                    <label class="control-label" for="iptSName">流名称</label>
                    <input class="form-control input-sm" type="text" id="iptSName">
                </div>
            </div>

            <!--视频区域-->
            <div id="video-container" class="clearfix">
                <video id="red5pro-publisher" width="720" height="480" autoplay muted></video>
            </div>
            <!---->
            <div class="btn">
                <ul class="pagination" style="display: inline;margin-right: 50px; ">
                    <li value="true"><a href="#">RTMP</a></li>
                    <li class="active" value="false"><a href="#">WebRTC</a></li>
                </ul>

                <button id="startBtn" class="btn btn-info btn-sm" type="button"><i class="fa fa-cloud-upload"></i> 发布视频</button>
                <button id="stopBtn" class="btn btn-danger btn-sm" type="button"><i class="fa fa-stop"></i> 停止发布</button>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/bootstrap.min.js"></script>

<script src="lib/red5pro/red5pro-sdk.js"></script>
<script src="js/main.js"></script>
<script type="text/javascript">
    $(document).ready(function (e) {
        var rtmp = false;
        $('.pagination > li').click(function () {
            rtmp = $(this).attr('value');
            $(this).addClass('active').siblings().removeClass('active');
        });

        var util = new PublisherUtils('live',red5prosdk);
        if(rtmp == true || rtmp == "true"){
            util.rtmpListen("rtmp","192.168.22.5",1935,null,'publisher1');
            util.rtcUnPublish();
        }else{
            util.rtcListen("ws","192.168.22.5","8081",null,'publisher1');
            util.unpublish();
        }
    });

    this.publisherLog = function(message) {
        console.log('[PublisherSWF] ' + message);
    };

//(function (red5pro) {
//    var util = new PublisherUtils('live', red5pro);
//    util.rtmpListen("rtmp://","localhost",1935,"TD001",'video');
//
//})(red5prosdk);
</script>
</body>
</html>