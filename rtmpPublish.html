<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script type="text/javascript">
        //学校
        function School(_name){
            this.name = _name;
            this.list = [];
            var that = this;
        }

        School.prototype.add = function (room) {
            this.list.push(room);
            console.log(this.name, '添加', room.name);
        };

        School.prototype.remove = function (room) {
            console.log(this.name, '移除', room.name);
        };

        function ClassRoom(level){
            this.name = level;
            this.index = 0;
            this.list = null;
        }

        function say(sex){
            if(sex == 'male'){
                return '男生说','啦啦啦啦啦啦啦啦';
            }else if(sex =='female'){
                return '女生说','哈哈哈哈哈';
            }else{
                return '不男不女，不许说话';
            }
        }

        function createPeoples(){
            var list = [];
            for(var i=1; i<=50; i++){
                var rn = Math.round(Math.random() * 10);
                var arr =new Array('male','female',null);
                list.push({sex:arr[rn %3], age:18, index:i, option:rn, out:function (name) {
                    return Date.now();
                }});
//                if(rn %3 == 0){
//                    list.push({sex:'male',age:18,index:i,option:rn});
//                }else if(rn %3 == 1){
//                    list.push({sex:'female',age:18,index:i,option:rn});
//                }else{
//                    list.push({sex:null, age:18, index:i,option:rn});
//                }
            }
            return list;
        }
        
        window.onload = function () {
            var school = new School("上海小学");
            for(var i=1; i<=5; i++){
                var cr = new ClassRoom(i+"年级");
                cr.index = i;
                cr.list = createPeoples();
                school.add(cr);
            }

            for(var j =0; j<school.list.length; j++){
                var room = school.list[j];
                for(var k=0; k<room.list.length; k++){
                    var stu = room.list[k];//单数学生，就是个体
//                    console.log(JSON.stringify(stu));
                    if(stu.sex == null){
                        console.log(room.name,stu.index, say(stu.sex),stu.out());
                    }
//                    console.log(room.name,stu.index, say(stu.sex));
                }
            }
        }
    </script>
</body>
</html>